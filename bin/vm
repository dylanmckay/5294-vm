#!/usr/bin/env ruby

require_relative "../lib/parser/parser"
require_relative "../lib/vm/cli_bus"
require_relative "../lib/vm/dispatcher"


instructions = Parser.new(File.read(ARGV[0])).cpu_instructions
bus = CliBus.new
dispatcher = Dispatcher.new(instructions, bus)

dispatcher.run
